<UserControl x:Class="QuizApp.WPF.Views.User.QuizTakingView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="600" Width="800">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header & Progress -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="{Binding Quiz.Title}" FontSize="24" FontWeight="Bold" Foreground="#2C3E50"/>
            <TextBlock Text="{Binding CurrentQuestionIndex, StringFormat=' (Question {0})'}" 
                       FontSize="24" FontWeight="Bold" Foreground="#7F8C8D"/>
        </StackPanel>

        <!-- Loading Indicator -->
        <ProgressBar Grid.Row="1" Height="4" IsIndeterminate="True" 
                     Name="LoadingProgressBar"
                     Margin="0,0,0,20"/>

        <!-- Question Content -->
        <Border Grid.Row="2" Background="White" Padding="30" 
                Name="QuestionContent"
                Margin="0,0,0,20">
            <StackPanel>
                <!-- Question Text -->
                <TextBlock Text="{Binding CurrentQuestion.Text}" FontSize="18" FontWeight="SemiBold" 
                           TextWrapping="Wrap" Margin="0,0,0,20" Foreground="#2C3E50"/>

                <!-- Category -->
                <TextBlock Text="{Binding CurrentQuestion.CategoryName, StringFormat='Category: {0}'}" 
                           FontSize="12" Foreground="#7F8C8D" Margin="0,0,0,20"/>

                <!-- Options -->
                <ItemsControl ItemsSource="{Binding CurrentQuestion.Options}" Margin="0,10,0,0">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#ECF0F1" BorderThickness="1" Margin="0,5">
                                <RadioButton GroupName="Options" Content="{Binding Text}" 
                                             Tag="{Binding Id}"
                                             Padding="15,10"
                                             Background="Transparent"
                                             BorderThickness="0"/>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Border>

        <!-- Navigation Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="← Previous" Command="{Binding PreviousQuestionCommand}" 
                    Background="#95A5A6" Foreground="White" Padding="15,10" Margin="0,0,10,0"/>
            <Button Content="Next →" Command="{Binding NextQuestionCommand}" 
                    Background="#2196F3" Foreground="White" Padding="15,10" Margin="0,0,10,0"/>
            <Button Content="Submit Quiz" Command="{Binding SubmitQuizCommand}" 
                    Background="#4CAF50" Foreground="White" Padding="15,10"
                    Name="SubmitButton"/>
        </StackPanel>
    </Grid>
</UserControl>